package com.shangtang.controller;

import java.awt.image.BufferedImage;
import java.io.BufferedReader;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;

import javax.imageio.ImageIO;

import org.apache.commons.codec.binary.Base64;

public class Base64Image {

	public static void main(String[] args) throws Exception {
		// TODO Auto-generated method stub
		System.out.println(new String(encodeImgageToBase64(new File("/Users/daniel/Downloads/d.jpeg"))));
//		decoderBase64File(new String(encodeImgageToBase64(new File("/Users/daniel/Downloads/d.jpeg"))));
		decoderBase64File("data:image/jpeg;base64,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");
	}

	public static void decoderBase64File(String base64Code) throws Exception {
		byte[] d = base64Code.getBytes();

//		byte[] base64 = Base64.encodeBase64(d);
		byte[] encodeBase64 = Base64.decodeBase64(d);
		FileOutputStream out = new FileOutputStream("/Users/daniel/Downloads/3.jpeg");
		out.write(encodeBase64);
		out.close();
	}

	public static String fefe() throws IOException {
		BufferedReader br = new BufferedReader(new InputStreamReader(
				new FileInputStream(
						new File("/Users/daniel/Downloads/d.jpeg")),
				"UTF-8"));
		String data = null;
		StringBuilder sb = new StringBuilder();
		while ((data = br.readLine()) != null) {
			// System.out.println(data);
			sb.append(data);
		}
		return sb.toString();
	}

	public static byte[] encodeImgageToBase64(File imageFile) {

		ByteArrayOutputStream outputStream = null;

		try {

			BufferedImage bufferedImage = ImageIO.read(imageFile);

			outputStream = new ByteArrayOutputStream();

			ImageIO.write(bufferedImage, "jpeg", outputStream);

		} catch (MalformedURLException e1) {

			e1.printStackTrace();

		} catch (IOException e) {

			e.printStackTrace();

		}
		
		byte[] encodeBase64 = Base64.encodeBase64(outputStream.toByteArray());
		return encodeBase64;

		// 对字节数组Base64编码

//		BASE64Encoder encoder = new BASE64Encoder();
//
//		return encoder.encode(outputStream.toByteArray());// 返回Base64编码过的字节数组字符串

	}

}
